{"remainingRequest":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\src\\views\\re-lo\\components\\FormCom.vue?vue&type=style&index=0&id=851239e0&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\src\\views\\re-lo\\components\\FormCom.vue","mtime":1580204022861},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb2RlIHsKCW1pbi13aWR0aDogOTBweDsKCW1heC1oZWlnaHQ6IDQwcHg7Cn0KCi5idXR0b24gewoJbWluLXdpZHRoOiAxMDAlOwp9Cg=="},{"version":3,"sources":["FormCom.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0MA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"FormCom.vue","sourceRoot":"src/views/re-lo/components","sourcesContent":["<template>\r\n\t<div id=\"form-com\">\r\n\t\t<el-form status-icon :rules=\"rules\" :model=\"formData\" ref=\"formData\">\r\n\t\t\t<el-form-item prop=\"name\" v-show=\"!type\">\r\n\t\t\t\t<el-input type=\"text\" placeholder=\"username\" v-model=\"formData.name\">\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-user\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item prop=\"email\">\r\n\t\t\t\t<el-input type=\"e-mail\" placeholder=\"E-mail\" v-model=\"formData.email\">\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-message\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item prop=\"pass\">\r\n\t\t\t\t<el-input type=\"password\" placeholder=\"Password\" v-model=\"formData.pass\" show-password>\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-lock\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\t\t\t<el-form-item prop=\"checkPass\" v-show=\"!type\">\r\n\t\t\t\t<el-input type=\"password\" placeholder=\"Repeat the Password\" v-model=\"formData.checkPass\" show-password>\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-lock\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t\t<!-- \t\t\t<el-form-item prop=\"code\" label-width=\"50\">\r\n\t\t\t\t<el-row :gutter=\"10\">\r\n\t\t\t\t\t<el-col :span=\"16\">\r\n\t\t\t\t\t\t<el-input type=\"text\" maxlength=\"4\" placeholder=\"验证码\" v-model=\"code\">\r\n\t\t\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-thumb\"></i>\r\n\t\t\t\t\t\t</el-input>\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t\t<el-col :span=\"4\">\r\n\t\t\t\t\t\t<img class=\"code\" :src=\"url\" />\r\n\t\t\t\t\t</el-col>\r\n\t\t\t\t</el-row>\r\n\t\t\t</el-form-item> -->\r\n\r\n\t\t\t<el-form-item>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"SubmitForm\" class=\"button\">{{type?'登录':'注册'}}</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tLogin,\r\n\t\tRegister,\r\n\t\tIsExists,\r\n\t\tGetUserInfo\r\n\t} from '@/api/api.js'\r\n\texport default {\r\n\t\tprops: ['type'],\r\n\t\tname: \"FormCom\",\r\n\t\tdata: function() {\r\n\t\t\tlet checkIsexists = async (rule, value, callback) => {\r\n\t\t\t\tif (!this.type) {\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tlet rsp = await IsExists(this, value);\r\n\t\t\t\t\t\tif (rsp.data.code === 100) {\r\n\t\t\t\t\t\t\tcallback(new Error(\"已被注册\"))\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcallback()\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tmessage: '获取数据失败,请检查网络!'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tlet validatePass = (rule, value, callback) => {\r\n\t\t\t\tif (value === '') {\r\n\t\t\t\t\tcallback(new Error('请输入密码'));\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.formData.pass !== '' && !this.type) {\r\n\t\t\t\t\t\tthis.$refs.formData.validateField('checkPass');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback();\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tlet validatePass2 = (rule, value, callback) => {\r\n\t\t\t\tif (!this.type) {\r\n\t\t\t\t\tif (value === '') {\r\n\t\t\t\t\t\tcallback(new Error('请再次输入密码'));\r\n\t\t\t\t\t} else if (value !== this.formData.pass) {\r\n\t\t\t\t\t\tcallback(new Error('两次输入密码不一致!'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\treturn {\r\n\t\t\t\t// url: \"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg\",\r\n\t\t\t\tformData: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\temail: '',\r\n\t\t\t\t\tpass: '',\r\n\t\t\t\t\tcheckPass: ''\r\n\t\t\t\t},\r\n\t\t\t\t// code: '',\r\n\t\t\t\trules: {\r\n\t\t\t\t\tname: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '请输入ID',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tmin: 3,\r\n\t\t\t\t\t\t\tmax: 10,\r\n\t\t\t\t\t\t\tmessage: '长度在 3 到 10 个字符',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalidator: checkIsexists,\r\n\t\t\t\t\t\t\ttirgger: ['blur']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\temail: [{\r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: '请输入邮箱地址',\r\n\t\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype: 'email',\r\n\t\t\t\t\t\t\tmessage: '请输入正确的邮箱地址',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalidator: checkIsexists,\r\n\t\t\t\t\t\t\ttirgger: ['blur']\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tpass: [{\r\n\t\t\t\t\t\t\tmin: 6,\r\n\t\t\t\t\t\t\tmessage: '密码至少需要6位数',\r\n\t\t\t\t\t\t\ttrigger: ['blur', 'change'],\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tvalidator: validatePass,\r\n\t\t\t\t\t\t\ttrigger: ['blur'],\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tcheckPass: [{\r\n\t\t\t\t\t\tvalidator: validatePass2,\r\n\t\t\t\t\t\ttrigger: ['blur'],\r\n\t\t\t\t\t}],\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tLogin: async function() {\r\n\t\t\t\tlet rsp = await Login(this, {\r\n\t\t\t\t\t'email': this.email,\r\n\t\t\t\t\t'pass': this.pass1\r\n\t\t\t\t})\r\n\t\t\t\tif (rsp.data.token) {\r\n\t\t\t\t\tthis.$store.state.token = rsp.data.token;\r\n\t\t\t\t\trsp = await GetUserInfo(this, this.$store.state.token);\r\n\t\t\t\t\tif (rsp.data.code == 200) {\r\n\t\t\t\t\t\tthis.$store.state.user = rsp.data.user;\r\n\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\tpath: '/challenges'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tRegister: async function() {\r\n\t\t\t\tlet rsp = await Register(this, {\r\n\t\t\t\t\t'username': this.name,\r\n\t\t\t\t\t'email': this.email,\r\n\t\t\t\t\t'pass': this.pass1\r\n\t\t\t\t})\r\n\t\t\t\tif (rsp.data.token) {\r\n\t\t\t\t\tthis.$store.state.token = rsp.data.token;\r\n\t\t\t\t\trsp = await GetUserInfo(this, this.$store.state.token);\r\n\t\t\t\t\tif (rsp.data.code == 200) {\r\n\t\t\t\t\t\tthis.$store.state.user = rsp.data.user;\r\n\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\tpath: '/challenges'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tSubmitForm: function() {\r\n\t\t\t\tif (this.type) {\r\n\t\t\t\t\tthis.Login();\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.Register();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.code {\r\n\t\tmin-width: 90px;\r\n\t\tmax-height: 40px;\r\n\t}\r\n\r\n\t.button {\r\n\t\tmin-width: 100%;\r\n\t}\r\n</style>\n"]}]}