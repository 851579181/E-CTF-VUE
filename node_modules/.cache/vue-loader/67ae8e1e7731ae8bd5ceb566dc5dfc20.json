{"remainingRequest":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\src\\views\\index\\index.vue?vue&type=style&index=0&id=1fdc95ed&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\src\\views\\index\\index.vue","mtime":1580120919320},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\rgdzg\\Desktop\\E-CTF\\E-CTF-VUE\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb250YWluZXIgewoJbWFyZ2luOiAwIGF1dG87CgltYXgtd2lkdGg6IDQ1JTsKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8IA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/index","sourcesContent":["<template>\r\n\t<div id=\"index\">\r\n\t\t<!-- <el-button v-on:click=\"Strore\">Store</el-button> -->\r\n\t\t<div class=\"block\">\r\n\t\t\t<div class=\"container\">\r\n\t\t\t\t<h1 style=\"text-align: center; color: #409EFF;\">公告板</h1>\r\n\t\t\t\t<el-divider content-position=\"right\">\r\n\t\t\t\t\t<el-popover v-if=\"role\" placement=\"top-start\" width=\"150\" trigger=\"hover\">\r\n\t\t\t\t\t\t<div><i class=\"el-icon-circle-plus\" style=\"color: #67C23A;\"></i><span style=\"margin-left: 5px;\">可更新公告。</span></div>\r\n\t\t\t\t\t\t<el-button slot=\"reference\" type=\"primary\" size=\"mini\" icon=\"el-icon-plus\" circle autofocus @click=\"showDialog=true\"></el-button>\r\n\t\t\t\t\t</el-popover>\r\n\t\t\t\t</el-divider>\r\n\t\t\t\t<el-timeline v-if=\"reload\">\r\n\t\t\t\t\t<el-timeline-item v-for=\"(ann, idx) in anncs\" :key=\"idx\" :timestamp=\"ann.createTime.trim().split(/\\s+/)[0]\"\r\n\t\t\t\t\t\tplacement=\"top\" :color=\"nodeColor\">\r\n\t\t\t\t\t\t<el-card>\r\n\t\t\t\t\t\t\t<div slot=\"header\" class=\"clearfix\">\r\n\t\t\t\t\t\t\t\t<span>{{ann.title}}</span>\r\n\t\t\t\t\t\t\t\t<el-popconfirm v-if=\"role\" @onConfirm=\"DelAnnc(ann.aid)\" confirmButtonText='确定' cancelButtonText='取消' icon=\"el-icon-info\"\r\n\t\t\t\t\t\t\t\t\ticonColor=\"red\" title=\"确定删除该公告吗？\" confirmButtonType=\"danger\">\r\n\t\t\t\t\t\t\t\t\t<el-button slot=\"reference\" style=\"float: right; padding: 3px 0\" type=\"text\"><i class=\"el-icon-close\" style=\"color: #F56C6C;\"></i></el-button>\r\n\t\t\t\t\t\t\t\t</el-popconfirm>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<h4>{{ann.body}}</h4>\r\n\t\t\t\t\t\t\t<p style=\"float: right; font-size: 12px; color: #8F8F8F;\">管理员 发布于: {{ann.createTime}}</p>\r\n\t\t\t\t\t\t</el-card>\r\n\t\t\t\t\t</el-timeline-item>\r\n\t\t\t\t</el-timeline>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<!-- Add annc Dialog -->\r\n\t\t<el-dialog center title=\"更新公告\" :visible.sync=\"showDialog\" width=\"30%\" :before-close=\"handleClose\">\r\n\t\t\t<el-form label-position='left' label-width=\"120px\">\r\n\r\n\t\t\t\t<el-form-item label=\"题目\">\r\n\t\t\t\t\t<el-input v-model=\"title\" placeholder=\"请输入标题\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t<el-form-item label=\"描述\" placeholder=\"请编辑公告内容\">\r\n\t\t\t\t\t<el-input type=\"textarea\" v-model=\"body\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"handleClose\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"Submit\">确 定</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tGetAnnouncements,\r\n\t\tAddAnnouncement,\r\n\t\tDelAnnouncement\r\n\t} from '@/api/api.js'\r\n\texport default {\r\n\t\tname: 'index',\r\n\t\tdata: () => {\r\n\t\t\treturn {\r\n\t\t\t\tshowDialog: false,\r\n\t\t\t\tnodeColor: \"#409EFF\",\r\n\t\t\t\tanncs: [],\r\n\t\t\t\treload: true,\r\n\t\t\t\t// 公告数据\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tbody: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tInitAnnc: async function() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet rsp = await GetAnnouncements(this);\r\n\t\t\t\t\tthis.anncs = rsp.data.anncs;\r\n\t\t\t\t\tthis.reload = false;\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.reload = true\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '获取数据失败,请检查网络!'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tDelAnnc: async function(aid) {\r\n\t\t\t\tlet rsp = await DelAnnouncement(this, aid);\r\n\t\t\t\tthis.$message({\r\n\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\tmessage: '删除成功'\r\n\t\t\t\t});\r\n\t\t\t\tthis.InitAnnc();\r\n\t\t\t},\r\n\t\t\thandleClose: function() {\r\n\t\t\t\tthis.$confirm('此操作将不会放弃当前已编辑内容!!!', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tthis.showDialog = false;\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'info',\r\n\t\t\t\t\t\tmessage: '放弃编辑公告!'\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tSubmit: async function() {\r\n\t\t\t\tlet rsp = await AddAnnouncement(this, {\r\n\t\t\t\t\t'title': this.title,\r\n\t\t\t\t\t'body': this.body\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(rsp);\r\n\t\t\t\tif (rsp.data.code == 200) {\r\n\t\t\t\t\tthis.showDialog = false;\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\tmessage: '更新公告成功!'\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.InitAnnc()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.showDialog = false;\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmessage: '更新公告失败!'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\trole: function() {\r\n\t\t\t\treturn this.$store.state.user.role\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated: function() {\r\n\t\t\tthis.InitAnnc();\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.container {\r\n\t\tmargin: 0 auto;\r\n\t\tmax-width: 45%;\r\n\t}\r\n</style>\n"]}]}